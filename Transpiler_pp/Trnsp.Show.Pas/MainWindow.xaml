<Window
    x:Class="Transp.Show.Pas.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Transp.Show.Pas"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Trnsp.Show.Pas.ViewModels"
    Title="Pascal Code Visualizer"
    Width="1000"
    Height="600"
    d:DataContext="{d:DesignInstance Type=vm:MainViewModel,
                                     IsDesignTimeCreatable=True}"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  Toolbar  -->
        <StackPanel
            Grid.Row="0"
            Grid.ColumnSpan="5"
            Background="#F0F0F0"
            Orientation="Horizontal">
            <Button
                Margin="5"
                Padding="5,2"
                Command="{Binding LoadFileCommand}"
                Content="Load File" />
        </StackPanel>

        <!--  TreeView  -->
        <TreeView
            x:Name="CodeStructureTreeView"
            Grid.Row="1"
            Grid.Column="0"
            BorderThickness="0"
            ItemsSource="{Binding RootNodes}"
            SelectedItemChanged="CodeStructureTreeView_SelectedItemChanged">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock
                            Width="20"
                            Margin="0,0,5,0"
                            FontWeight="Bold"
                            Foreground="Blue"
                            Text="{Binding TypeIcon}"
                            TextAlignment="Center" />
                        <TextBlock Text="{Binding DisplayInfo}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
            <TreeView.ItemContainerStyle>
                <Style TargetType="TreeViewItem">
                    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay, FallbackValue=False}" />
                </Style>
            </TreeView.ItemContainerStyle>
        </TreeView>

        <!--  Splitter 1  -->
        <GridSplitter
            Grid.Row="1"
            Grid.Column="1"
            Width="5"
            HorizontalAlignment="Stretch" />

        <!--  Source View  -->
        <TextBox
            x:Name="SourceCodeEditor"
            Grid.Row="1"
            Grid.Column="2"
            AcceptsReturn="True"
            BorderThickness="0"
            FontFamily="Consolas"
            FontSize="14"
            HorizontalScrollBarVisibility="Auto"
            IsReadOnly="True"
            Text="{Binding FullSourceCode, Mode=OneWay}"
            VerticalScrollBarVisibility="Auto" />

        <!--  Splitter 2  -->
        <GridSplitter
            Grid.Row="1"
            Grid.Column="3"
            Width="5"
            HorizontalAlignment="Stretch" />

        <!--  Properties View  -->
        <ScrollViewer Grid.Row="1" Grid.Column="4">
            <StackPanel Margin="10">
                <TextBlock
                    Margin="0,0,0,10"
                    FontSize="16"
                    FontWeight="Bold"
                    Text="Properties" />
                <Grid DataContext="{Binding SelectedNode}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="0"
                        Margin="0,0,10,5"
                        FontWeight="Bold"
                        Text="Name:" />
                    <TextBox
                        Grid.Row="0"
                        Grid.Column="1"
                        Margin="0,0,0,5"
                        IsReadOnly="True"
                        Text="{Binding Name, Mode=OneWay}" />

                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="0"
                        Margin="0,0,10,5"
                        FontWeight="Bold"
                        Text="Type:" />
                    <TextBox
                        Grid.Row="1"
                        Grid.Column="1"
                        Margin="0,0,0,5"
                        IsReadOnly="True"
                        Text="{Binding Type, Mode=OneWay}" />

                    <TextBlock
                        Grid.Row="2"
                        Grid.Column="0"
                        Margin="0,0,10,5"
                        FontWeight="Bold"
                        Text="Pos:" />
                    <TextBox
                        Grid.Row="2"
                        Grid.Column="1"
                        Margin="0,0,0,5"
                        IsReadOnly="True"
                        Text="{Binding SourcePos, Mode=OneWay}" />

                    <TextBlock
                        Grid.Row="3"
                        Grid.Column="0"
                        Margin="0,0,10,5"
                        FontWeight="Bold"
                        Text="Length:" />
                    <TextBox
                        Grid.Row="3"
                        Grid.Column="1"
                        Margin="0,0,0,5"
                        IsReadOnly="True"
                        Text="{Binding Length, Mode=OneWay}" />

                    <TextBlock
                        Grid.Row="4"
                        Grid.Column="0"
                        Margin="0,0,10,5"
                        VerticalAlignment="Top"
                        FontWeight="Bold"
                        Text="Code:" />
                    <TextBox
                        Grid.Row="4"
                        Grid.Column="1"
                        MinHeight="100"
                        Margin="0,0,0,5"
                        AcceptsReturn="True"
                        IsReadOnly="True"
                        Text="{Binding Code, Mode=OneWay}"
                        TextWrapping="Wrap" />
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
