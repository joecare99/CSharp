// ***********************************************************************
// Assembly         : Snake_Base
// Author           : Mir
// Created          : 08-26-2022
//
// Last Modified By : Mir
// Last Modified On : 09-09-2022
// ***********************************************************************
// <copyright file="TileDef.cs" company="JC-Soft">
//     Copyright (c) JC-Soft. All rights reserved.
// </copyright>
// <summary></summary>
// ***********************************************************************
using ConsoleDisplay.View;
using System;
using System.Drawing;

/// <summary>
/// The View namespace.
/// </summary>
/// <autogeneratedoc />
namespace Snake_Console.View
{
    /// <summary>
    /// Class TileDef.
    /// Implements the <see cref="ConsoleDisplay.View.TileDef{Snake_Base.ViewModel.Tiles}" /></summary>
    /// <seealso cref="ConsoleDisplay.View.TileDef{Snake_Base.ViewModel.Tiles}" />
    public class TileDef : TileDefBase
    {
        /// <summary>
        /// The v tile definition string
        /// </summary>
        /// <autogeneratedoc />
        private static string[][] _vTileDefStr = new string[][]{
            new string[]{ "  " }, //Empty
            new string[]{ "|_" }, //Wall
            new string[]{ "##" }, //Apple
            new string[]{ "/\\" }, //Head_N
            new string[]{ "''" }, //Tail_N
            new string[]{ "||" }, //Boby_NS
            new string[]{ "<}" }, //Head_W
            new string[]{ "\\/" }, //Head_S
            new string[]{ "{>" }, //Head_E
            new string[]{ "=-" }, //Tail_W
            new string[]{ ",," }, //Tail_S
            new string[]{ "-=" }, //Tail_E
            new string[]{ "++" }, 
            new string[]{ "++" },
            new string[]{ "++" },
            new string[]{ "++" },
            new string[]{ "==" }, //Body_WE
        };

        /// <summary>
        /// The v tile colors
        /// </summary>
        /// <autogeneratedoc />
        private static byte[][] _vTileColors = new byte[][]{
            new byte [] { 0x07 }, //Empty
			new byte [] { 0x4F }, //Wall
            new byte [] { 0x0C }, //Apple
            new byte [] { 0xAE }, //Head_N
            new byte [] { 0x0E }, 
            new byte [] { 0x0E },
            new byte [] { 0xAE },
            new byte [] { 0xAE },
            new byte [] { 0xAE },
            new byte [] { 0x0E } //Rest ...
        };

        /// <summary>
        /// Gets the tile definition.
        /// </summary>
        /// <param name="tile">The tile.</param>
        /// <returns>(string[] lines, (System.ConsoleColor fgr, System.ConsoleColor bgr)[] colors).</returns>
        /// <autogeneratedoc />
        public override (string[] lines, (ConsoleColor fgr, ConsoleColor bgr)[] colors) GetTileDef(Enum tile)
        {
            (string[] lines, (ConsoleColor fgr, ConsoleColor bgr)[] colors) result = default;
            result.lines = GetArrayElement(_vTileDefStr, tile);

            result.colors = new (ConsoleColor fgr, ConsoleColor bgr)[result.lines.Length * result.lines[0].Length];
            byte[] colDef = GetArrayElement(_vTileColors, tile);
            for (var i = 0; i < result.lines.Length * result.lines[0].Length; i++)
                result.colors[i] = ByteTo2ConsColor(colDef[i % colDef.Length]);
            return result;
        }

        public TileDef():base() {
            TileSize = new Size(2, 1);
        }
    }
}
