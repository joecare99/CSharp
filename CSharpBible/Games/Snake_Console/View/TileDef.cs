// ***********************************************************************
// Assembly         : Snake_Base
// Author           : Mir
// Created          : 08-26-2022
//
// Last Modified By : Mir
// Last Modified On : 09-09-2022
// ***********************************************************************
// <copyright file="TileDef.cs" company="JC-Soft">
//     Copyright (c) JC-Soft. All rights reserved.
// </copyright>
// <summary></summary>
// ***********************************************************************
using ConsoleDisplay.View;
using Snake_Base.ViewModel;
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

/// <summary>
/// The View namespace.
/// </summary>
/// <autogeneratedoc />
namespace Snake_Console.View
{
    /// <summary>
    /// Class TileDef.
    /// Implements the <see cref="ConsoleDisplay.View.TileDef{Snake_Base.ViewModel.Tiles}" /></summary>
    /// <seealso cref="ConsoleDisplay.View.TileDef{Snake_Base.ViewModel.Tiles}" />
    public class TileDef : TileDefBase
    {
        /// <summary>
        /// The v tile definition string
        /// </summary>
        /// <autogeneratedoc />
        private static string[][] _vTileDefStr = new string[][]{
            new string[]{ "  " },
            new string[]{ "{}" },
            new string[]{ "{}" },
            new string[]{ "{}" },
            new string[]{ "{}" },
            new string[]{ "''" },
            new string[]{ "- " },
            new string[]{ ",," },
            new string[]{ " -" },
            new string[]{ "++" },
            new string[]{ "++" },
            new string[]{ "++" },
            new string[]{ "++" },
            new string[]{ "||" },
            new string[]{ "==" },
            new string[]{ "##" },
            new string[]{ "[]" }
        };

        /// <summary>
        /// The v tile colors
        /// </summary>
        /// <autogeneratedoc />
        private static byte[][] _vTileColors = new byte[][]{
            new byte [] {0x07 },
            new byte [] {0x6E },
            new byte [] { 0x4F },
            new byte [] { 0x0E, 0x0E,  },
            new byte [] { 0x6F },
            new byte [] { 0x6E },
            new byte [] { 0xA0 },
            new byte [] { 0x1A, 0xA0 },
            new byte [] { 0xA0 },
            new byte [] { 0xA0,0x1A },
            new byte [] { 0x6E },
            new byte [] { 0x6F },
            new byte [] { 0x6E },
            new byte [] { 0x4F }
        };

        /// <summary>
        /// Gets the tile definition.
        /// </summary>
        /// <param name="tile">The tile.</param>
        /// <returns>(string[] lines, (System.ConsoleColor fgr, System.ConsoleColor bgr)[] colors).</returns>
        /// <autogeneratedoc />
        public override (string[] lines, (ConsoleColor fgr, ConsoleColor bgr)[] colors) GetTileDef(Enum tile)
        {
            (string[] lines, (ConsoleColor fgr, ConsoleColor bgr)[] colors) result = default;
            result.lines = GetArrayElement(_vTileDefStr, tile);

            result.colors = new (ConsoleColor fgr, ConsoleColor bgr)[result.lines.Length * result.lines[0].Length];
            byte[] colDef = GetArrayElement(_vTileColors, tile);
            for (var i = 0; i < result.lines.Length * result.lines[0].Length; i++)
                result.colors[i] = ByteTo2ConsColor(colDef[i % colDef.Length]);
            return result;
        }

        public TileDef():base() {
            TileSize = new Size(2, 1);
        }
    }
}
