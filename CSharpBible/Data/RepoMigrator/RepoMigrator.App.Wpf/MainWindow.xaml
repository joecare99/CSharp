<!-- RepoMigrator.App.Wpf/MainWindow.xaml -->
<Window x:Class="RepoMigrator.App.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Repo Migrator" Height="520" Width="820">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Source/Target Settings -->
        <StackPanel Orientation="Horizontal">
            <GroupBox Header="Quelle" Width="380">
                <StackPanel Margin="8">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Typ" Width="80"/>
                        <ComboBox Width="240"
                                  ItemsSource="{Binding RepoTypes}"
                                  SelectedItem="{Binding SourceType}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" >
                        <TextBlock Text="URL/Pfad" Width="80"/>
                        <TextBox Width="240" Text="{Binding SourceUrl, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Branch/Trunk" Width="80"/>
                        <TextBox Width="240" Text="{Binding SourceBranch}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="User" Width="80"/>
                        <TextBox Width="240" Text="{Binding SourceUser}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Passwort" Width="80"/>
                        <PasswordBox Width="240" PasswordChanged="SourcePasswordChanged"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <GroupBox Header="Ziel" Width="380">
                <StackPanel Margin="8">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Typ" Width="80"/>
                        <ComboBox Width="240"
                                  ItemsSource="{Binding RepoTypes}"
                                  SelectedItem="{Binding TargetType}"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="URL/Pfad" Width="80"/>
                        <TextBox Width="240" Text="{Binding TargetUrl, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <!-- Options -->
        <GroupBox Grid.Row="1" Header="Optionen" Margin="0,12,0,0">
            <StackPanel Margin="8" Orientation="Horizontal">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Von (exkl.)" Width="80"/>
                    <TextBox Width="220" Text="{Binding FromId}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Bis (inkl.)" Width="80"/>
                    <TextBox Width="220" Text="{Binding ToId}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Max" Width="40"/>
                    <TextBox Width="80" Text="{Binding MaxCount}"/>
                </StackPanel>
                <CheckBox Content="Älteste zuerst" IsChecked="{Binding OldestFirst}"/>
            </StackPanel>
        </GroupBox>

        <!-- Log -->
        <GroupBox Grid.Row="2" Header="Log" Margin="0,12,0,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <TextBox Text="{Binding Log, Mode=OneWay}" FontFamily="Consolas" TextWrapping="Wrap" AcceptsReturn="True" IsReadOnly="True" BorderThickness="0"/>
            </ScrollViewer>
        </GroupBox>

        <!-- Actions -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <ProgressBar Width="400" Height="18" Minimum="0" Maximum="{Binding ProgressMax}" Value="{Binding ProgressValue}"/>
            <Button Content="Start" Command="{Binding StartCommand}" IsEnabled="{Binding IsIdle}"/>
            <Button Content="Abbrechen" Command="{Binding CancelCommand}" IsEnabled="{Binding IsRunning}"/>
        </StackPanel>
    </Grid>
</Window>
