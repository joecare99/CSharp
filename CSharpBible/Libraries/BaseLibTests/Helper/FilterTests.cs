// ***********************************************************************
// Assembly         : BaseLibTests
// Author           : Mir
// Created          : 03-27-2023
//
// Last Modified By : Mir
// Last Modified On : 03-27-2023
// ***********************************************************************
// <copyright file="FilterTests.cs" company="JC-Soft">
//     Copyright © JC-Soft 2023
// </copyright>
// <summary></summary>
// ***********************************************************************
using Microsoft.VisualStudio.TestTools.UnitTesting;

/// <summary>
/// The Tests namespace.
/// </summary>
/// <autogeneratedoc />
namespace BaseLib.Helper.Tests
{
    /// <summary>
    /// Defines test class FilterTests.
    /// </summary>
    /// <autogeneratedoc />
    [TestClass()]
    public class FilterTests
    {
        /// <summary>
        /// ps the t1 test.
        /// </summary>
        /// <param name="fNew">The f new.</param>
        /// <param name="fAct">The f act.</param>
        /// <param name="fDt">The f dt.</param>
        /// <param name="fExp">The f exp.</param>
        /// <autogeneratedoc />
        [TestMethod()]
        [DataRow(0.0f, 0.0f, 0.0f, 0.0f)]
        [DataRow(0.5f, 0.0f, 0.0f, 0.0f)]
        [DataRow(0.5f, 0.0f, 1.0f, 0.5d)]
        [DataRow(1.0f, 0.0f, 0.0f, 0.0f)]
        [DataRow(1.0f, 0.0f, 1.0f, 1.0d)]
        [DataRow(1.0f, 0.0f, 0.5d, 0.5d)]
        [DataRow(1.0f, 0.5d, 0.5d, 0.75d)]
        public void PT1Test(double fNew, double fAct, double fDt, double fExp)
        {
            Assert.AreEqual(fExp, fNew.PT1(ref fAct, fDt), 1e-12);
            Assert.AreEqual(fExp, fAct, 1e-12);
        }

        /// <summary>
        /// ps the t1 test1.
        /// </summary>
        /// <param name="fNew">The f new.</param>
        /// <param name="fAct">The f act.</param>
        /// <param name="fDt">The f dt.</param>
        /// <param name="fKP">The f kp.</param>
        /// <param name="fExp">The f exp.</param>
        /// <autogeneratedoc />
        [TestMethod()]
        [DataRow(0.0f, 0.0f, 0.0f, 1.0f, 0.0f)]
        [DataRow(0.5d, 0.0f, 0.1d, 0.5d, 0.025d)]
        [DataRow(1.0f, 0.0f, 0.2d, 1.0f, 0.2d)]
        public void PT1Test1(double fNew, double fAct, double fDt, double fKP, double fExp)
        {
            Assert.AreEqual(fExp, fNew.PT1(ref fAct, fDt, fKP), 1e-12);
            Assert.AreEqual(fExp, fAct, 1e-12);
            /*
            Assert.AreEqual(0.875f, fFilter.use(1.0f));
            Assert.AreEqual(0.9375f, fFilter.use(1.0f));

            Assert.AreEqual(0.46875f, fFilter.use(0.0f));
            Assert.AreEqual(0.734375f, fFilter.use(1.0f));
            Assert.AreEqual(0.3671875f, fFilter.use(0.0f));
            Assert.AreEqual(0.6835938f, fFilter.use(1.0f),1e-6);
            */
        }

        /// <summary>
        /// Defines the test method PT1Test2.
        /// </summary>
        /// <autogeneratedoc />
        [TestMethod()]
        public void PT1Test2()
        {
            var fAct = 1.0d;
            for (int i = 0; i < 39; i++)
            {
                Assert.AreNotEqual(0.0f, 0.0d.PT1(ref fAct, 0.5f, 1.0f), 1e-12, $"Test({i})={fAct}");
            }
            Assert.AreEqual(0.0f, 0.0d.PT1(ref fAct, 1.0f, 1.0f));
        }

        /// <summary>
        /// Means the test.
        /// </summary>
        /// <param name="iCnt">The i count.</param>
        /// <param name="fNew">The f new.</param>
        /// <param name="fExp">The f exp.</param>
        /// <autogeneratedoc />
        [TestMethod()]
        [DataRow(1, new double[] { 0.0f,1.0f }, new double[] { 0.0f,1.0f })]
        [DataRow(5, new double[] { 0.0f, 1.0f,1.0f, 1.0f, 1.0f, 1.0f }, new double[] { 0.0f, 0.2d, 0.4d, 0.6d, 0.8d, 1.0d })]
        public void MeanTest(int iCnt, double[] fNew, double[] fExp)
        {
            var aBuf = new double[iCnt];
            aBuf.Initialize();
            int iX = 0;
            for (int i = 0; i < fNew.Length; i++)
            {
                Assert.AreEqual(fExp[i], fNew[i].Mean(aBuf, ref iX), 1e-12,$"{i}");
                Assert.AreEqual((i+1) % iCnt, iX,$"{i}.cnt");
            }
        }

        /// <summary>
        /// Medians the test.
        /// </summary>
        /// <param name="iCnt">The i count.</param>
        /// <param name="fNew">The f new.</param>
        /// <param name="fExp">The f exp.</param>
        /// <autogeneratedoc />
        [TestMethod()]
        [DataRow(1, new double[] { 0.0f, 1.0f }, new double[] { 0.0f, 1.0f })]
        [DataRow(5, new double[] { 0.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f }, new double[] { 0.0f, 0.0d, 0.0d, 1.0d, 1.0d, 1.0d })]
        public void MedianTest(int iCnt, double[] fNew, double[] fExp)
        {
            var aBuf = new double[iCnt];
            aBuf.Initialize();
            int iX = 0;
            for (int i = 0; i < fNew.Length; i++)
            {
                Assert.AreEqual(fExp[i], fNew[i].Median(aBuf, ref iX), 1e-12, $"{i}");
                Assert.AreEqual((i + 1) % iCnt, iX, $"{i}.cnt");
            }
        }

        /// <summary>
        /// Defines the test method MeanTest2.
        /// </summary>
        /// <autogeneratedoc />
        [TestMethod()]
        public void MeanTest2()
        {
            var aBuf = new double[20];
            aBuf.Initialize();
                int ix = 0;

            var fAct = 0.0d;
            for (int i = 0; i < 19; i++)
            {
                Assert.AreNotEqual(1.0d, 1.0d.Mean(aBuf,ref ix), 1e-12, $"Test({i})={fAct}");
            }
            Assert.AreEqual(1.0d, 1.0d.Mean(aBuf, ref ix));
        }

        /// <summary>
        /// Defines the test method MedianTest2.
        /// </summary>
        /// <autogeneratedoc />
        [TestMethod()]
        public void MedianTest2()
        {
            var aBuf = new double[20];
            aBuf.Initialize();
            int ix = 0;

            var fAct = 0.0d;
            for (int i = 0; i < 9; i++)
            {
                Assert.AreNotEqual(1.0d, 1.0d.Median(aBuf, ref ix), 1e-12, $"Test({i})={fAct}");
            }
            Assert.AreEqual(1.0d, 1.0d.Median(aBuf, ref ix));
        }

    }
}