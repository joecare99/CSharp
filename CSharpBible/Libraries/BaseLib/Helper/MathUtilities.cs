// ***********************************************************************
// Assembly         : BaseLib
// Author           : Mir
// Created          : 03-27-2023
//
// Last Modified By : Mir
// Last Modified On : 03-27-2023
// ***********************************************************************
// <copyright file="MathUtilities.cs" company="JC-Soft">
//     Copyright © JC-Soft 2023
// </copyright>
// <summary></summary>
// ***********************************************************************
using System;
using System.Linq;

/// <summary>
/// The Helper namespace.
/// </summary>
/// <autogeneratedoc />
namespace BaseLib.Helper
{
    /// <summary>
    /// Class MathUtilities.
    /// </summary>
    /// <autogeneratedoc />
    public static class MathUtilities
    {
        /// <summary>
        /// ps the t1.
        /// </summary>
        /// <param name="newvalue">The newvalue.</param>
        /// <param name="actvalue">The actvalue.</param>
        /// <param name="dTn_Ta">The d tn ta.</param>
        /// <param name="KP">The kp.</param>
        /// <returns>System.Double.</returns>
        /// <autogeneratedoc />
        public static double PT1(this double newvalue, ref double actvalue, double dTn_Ta = 0.1d, double KP = 1.0d) 
            => actvalue = dTn_Ta * KP * newvalue + (1d - dTn_Ta) * actvalue;

        /// <summary>
        /// Means the specified buffer.
        /// </summary>
        /// <param name="newvalue">The newvalue.</param>
        /// <param name="buffer">The buffer.</param>
        /// <param name="ix">The ix.</param>
        /// <returns>System.Double.</returns>
        /// <autogeneratedoc />
        public static double Mean(this double newvalue, double[] buffer, ref int ix)
        {
            buffer[ix++] = newvalue;
            ix = ix % buffer.Length;
            return buffer.Average(); 
        }
        /// <summary>
        /// Medians the specified buffer.
        /// </summary>
        /// <param name="newvalue">The newvalue.</param>
        /// <param name="buffer">The buffer.</param>
        /// <param name="ix">The ix.</param>
        /// <param name="fMedian">The f median.</param>
        /// <returns>System.Double.</returns>
        /// <autogeneratedoc />
        public static double Median(this double newvalue, double[] buffer, ref int ix, double fMedian = 0.5d)
        {
            buffer[ix++] = newvalue;
            ix = ix % buffer.Length;
            var b = buffer.ToList<double>();
            b.Sort();
            return b[(int)Math.Floor(b.Count * fMedian)];
        }
    }
}
